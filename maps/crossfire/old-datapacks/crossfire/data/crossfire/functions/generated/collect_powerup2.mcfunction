# Make it clear that a power up was collected
execute if entity @s[tag=0] run playsound minecraft:block.note_block.chime master @a[scores={map=0}] ~ ~ ~ 1 0.5
execute if entity @s[tag=1] run playsound minecraft:block.note_block.chime master @a[scores={map=1}] ~ ~ ~ 1 0.5
execute if entity @s[tag=0] run tellraw @a[scores={map=0}] ["",{"text":"A power-up was picked up, watch out!"}]
execute if entity @s[tag=1] run tellraw @a[scores={map=1}] ["",{"text":"A power-up was picked up, watch out!"}]

# Destroy the drop
kill @e[type=!player,tag=drop,distance=..1.5,limit=1]

# Give the drop to the nearest player
scoreboard players set temp result 0

execute if score temp result matches 0 if entity @s[tag=drop0] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:3b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:3b}]},limit=1] container.3 with potion{custom_potion_effects:[{id:"minecraft:speed",amplifier:1,duration:400}],CustomPotionColor:10806260,display:{Name:"{\"color\":\"aqua\",\"italic\":false,\"text\":\"Swiftness II Potion\"}"}} 1
execute if score temp result matches 0 if entity @s[tag=drop0] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:4b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:4b}]},limit=1] container.4 with potion{custom_potion_effects:[{id:"minecraft:speed",amplifier:1,duration:400}],CustomPotionColor:10806260,display:{Name:"{\"color\":\"aqua\",\"italic\":false,\"text\":\"Swiftness II Potion\"}"}} 1
execute if score temp result matches 0 if entity @s[tag=drop0] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:5b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:5b}]},limit=1] container.5 with potion{custom_potion_effects:[{id:"minecraft:speed",amplifier:1,duration:400}],CustomPotionColor:10806260,display:{Name:"{\"color\":\"aqua\",\"italic\":false,\"text\":\"Swiftness II Potion\"}"}} 1

execute if score temp result matches 0 if entity @s[tag=drop1] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:3b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:3b}]},limit=1] container.3 with potion{custom_potion_effects:[{id:"minecraft:jump_boost",amplifier:4,duration:400}],CustomPotionColor:1309504,display:{Name:"{\"color\":\"green\",\"italic\":false,\"text\":\"Jump Boost V Potion\"}"}} 1
execute if score temp result matches 0 if entity @s[tag=drop1] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:4b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:4b}]},limit=1] container.4 with potion{custom_potion_effects:[{id:"minecraft:jump_boost",amplifier:4,duration:400}],CustomPotionColor:1309504,display:{Name:"{\"color\":\"green\",\"italic\":false,\"text\":\"Jump Boost V Potion\"}"}} 1
execute if score temp result matches 0 if entity @s[tag=drop1] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:5b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:5b}]},limit=1] container.5 with potion{custom_potion_effects:[{id:"minecraft:jump_boost",amplifier:4,duration:400}],CustomPotionColor:1309504,display:{Name:"{\"color\":\"green\",\"italic\":false,\"text\":\"Jump Boost V Potion\"}"}} 1

execute if score temp result matches 0 if entity @s[tag=drop2] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:3b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:3b}]},limit=1] container.3 with potion{custom_potion_effects:[{id:"minecraft:slow_falling",duration:400}],CustomPotionColor:16777215,display:{Name:"{\"color\":\"gray\",\"italic\":false,\"text\":\"Slow Falling I Potion\"}"}} 1
execute if score temp result matches 0 if entity @s[tag=drop2] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:4b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:4b}]},limit=1] container.4 with potion{custom_potion_effects:[{id:"minecraft:slow_falling",duration:400}],CustomPotionColor:16777215,display:{Name:"{\"color\":\"gray\",\"italic\":false,\"text\":\"Slow Falling I Potion\"}"}} 1
execute if score temp result matches 0 if entity @s[tag=drop2] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:5b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:5b}]},limit=1] container.5 with potion{custom_potion_effects:[{id:"minecraft:slow_falling",duration:400}],CustomPotionColor:16777215,display:{Name:"{\"color\":\"gray\",\"italic\":false,\"text\":\"Slow Falling I Potion\"}"}} 1

execute if score temp result matches 0 if entity @s[tag=drop3] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:3b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:3b}]},limit=1] container.3 with carrot_on_a_stick{CustomModelData:0,display:{Name:"{\"color\":\"gold\",\"italic\":false,\"text\":\"Rapid Fire Power-up\"}"}} 1
execute if score temp result matches 0 if entity @s[tag=drop3] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:4b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:4b}]},limit=1] container.4 with carrot_on_a_stick{CustomModelData:0,display:{Name:"{\"color\":\"gold\",\"italic\":false,\"text\":\"Rapid Fire Power-up\"}"}} 1
execute if score temp result matches 0 if entity @s[tag=drop3] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:5b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:5b}]},limit=1] container.5 with carrot_on_a_stick{CustomModelData:0,display:{Name:"{\"color\":\"gold\",\"italic\":false,\"text\":\"Rapid Fire Power-up\"}"}} 1

execute if score temp result matches 0 if entity @s[tag=drop4] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:3b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:3b}]},limit=1] container.3 with carrot_on_a_stick{CustomModelData:1,display:{Name:"{\"color\":\"light_purple\",\"italic\":false,\"text\":\"Multishot Power-up\"}"}} 1
execute if score temp result matches 0 if entity @s[tag=drop4] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:4b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:4b}]},limit=1] container.4 with carrot_on_a_stick{CustomModelData:1,display:{Name:"{\"color\":\"light_purple\",\"italic\":false,\"text\":\"Multishot Power-up\"}"}} 1
execute if score temp result matches 0 if entity @s[tag=drop4] store success score temp result run execute if entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:5b}]}] run item replace entity @a[distance=..1.5,nbt=!{Inventory:[{Slot:5b}]},limit=1] container.5 with carrot_on_a_stick{CustomModelData:1,display:{Name:"{\"color\":\"light_purple\",\"italic\":false,\"text\":\"Multishot Power-up\"}"}} 1

# Tell the player they've been given something
execute if entity @s[tag=!tutorial] run tellraw @s ["",{"text":"You've picked up a power up, right click the item that was just added to your inventory to use it."}]
tag @s add tutorial
